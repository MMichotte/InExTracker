<div class="container">
  <div class="section first">
    <div class="head">
      <span class="title">Month</span>  
      <input type="month" name="datePicker" id="datePicker" [value]="selectedMonth" (change)="setDate($event.target.value)">
    </div>
    <div class="content">
      <ul>
        <li class="current-balance">
          <span class="col-title col-main">Current balance:</span>
          <span class="col-amount" [ngClass]="currentBalance >= 0 ? '' : 'negative'">{{currentBalance}} â‚¬</span>
        </li>
        <li>
          <span class="col-title col-main" [ngClass]="cumulativeBalance >= 0 ? '' : 'negative'">Cumulative balance:</span>
          <span class="col-amount" [ngClass]="cumulativeBalance >= 0 ? '' : 'danger'">{{cumulativeBalance}} â‚¬</span>
        </li>
      </ul>
    </div>
  </div>
  
  <div class="section other incomes">
    <div class="head">
      <span class="title">Incomes</span>  
      <span></span>
    </div>
    <div class="content">
      <ul id="income-list">
        <li class="entry" *ngFor="let tr of incomes" (click)="setSelectedEntry(tr)" [ngClass]="{'selected-entry' : (selectedEntry == tr)}">
          <span class="col-date">{{tr.executionDate | date: 'EE dd'}} <span class="tag-icon" *ngIf="tr.repeat">ðŸ—“</span></span>
          <div class="col-title" [ngClass]="{'animated' : (selectedEntry == tr && selectedEntryOverflow)}" (click)="checkOverflow($event.currentTarget)">
            <span>
              <span class="tag-icon">{{tr.tags?.icon}}</span>
              {{tr.title}}
            </span>
          </div>
          <span class="col-amount">{{tr.amount}} â‚¬</span>
        </li>
      </ul>
    </div>
  </div>
  
  <div class="section other expenses">
    <div class="head">
      <span class="title">Expenses</span>  
      <span></span>
    </div>
    <div class="content">
      <ul id="expense-list">
        <li class="entry" *ngFor="let tr of expenses" (click)="setSelectedEntry(tr)" [ngClass]="{'selected-entry' : (selectedEntry == tr)}">
          <span class="col-date">{{tr.executionDate | date: 'EE dd'}} <span class="tag-icon" *ngIf="tr.repeat">ðŸ—“</span> </span>
          <div class="col-title" [ngClass]="{'animated' : (selectedEntry == tr && selectedEntryOverflow)}" (click)="checkOverflow($event.currentTarget)">
            <span>
              <span class="tag-icon">{{tr.tags?.icon}}</span>
              {{tr.title}}
            </span>
          </div>
          <span class="col-amount">{{tr.amount}} â‚¬</span>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="controls">
  <button class="button is-danger" (click)="onDelete()"  *ngIf="selectedEntry">
    <i class="fas fa-trash"></i>
  </button>
  <button class="button is-warning" (click)="onEdit()" *ngIf="selectedEntry">
    <i class="fas fa-pen"></i>
  </button>
  <button class="button is-primary" (click)="onAdd()">
    <i class="fas fa-plus"></i>
  </button>
</div>


<div class="modal" [ngClass]="{'is-active': showModal}">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Warning</p>
      <button class="delete" aria-label="close" (click)="showModal = false"></button>
    </header>
    <section class="modal-card-body">
      <span>
        You are about to delete a recurring entry.
        Do you whish to delete all its future entries?
      </span>
    </section>
    <footer class="modal-card-foot">
      <button class="button" (click)="showModal = false">Cancel</button>
      <div>
        <button class="button is-success" (click)="deleteEntry(false)">This one</button>
        <button class="button is-warning" (click)="deleteEntry(true)">All future</button>
      </div>
    </footer>
  </div>
</div>